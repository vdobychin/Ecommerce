@model Ecommerce.ViewModels.LineViewModel

<form  asp-controller="Line" asp-action="GetLines" asp-route-subCatalogId="@Model.subCatalogId" asp-route-lineFilter="@Model.lineFilter">
    <div class="row">
        <div class="col-9">
            <div class="mb-3 p-2" style="border-radius: 5px; border: 1px solid rgba(0,0,0,.125);">
                <div class="row">
                    <div class="col-8">
                        <div style="display: inline">
                            @if (Model.subCatalogId != 0)
                            {
                                <a asp-controller="Home" asp-action="Index">Каталог</a>
                                <span> - </span>
                                <a asp-controller="Line" asp-action="GetLines">Леска</a>
                                <span> - </span>
                                @if (Model.subCatalogId == 1)
                                {
                                    <a asp-controller="Line" asp-action="GetLines" asp-route-subCatalogId="1">Плетеные шнуры</a>
                                }
                                else if (Model.subCatalogId == 2)
                                {
                                    <a asp-controller="Line" asp-action="GetLines" asp-route-subCatalogId="2">Монофильная леска</a>
                                }
                            }
                            else
                            {
                                <a class="btn btn-secondary btn-sm" asp-action="GetLines" asp-route-subCatalogId="1" role="button">Плетеные шнуры</a>
                                <a class="btn btn-secondary btn-sm" asp-action="GetLines" asp-route-subCatalogId="2" role="button">Монофильная леска</a>
                            }
                        </div>
                    </div>
                    <div class="col-4">
                        @*
                            <div>
                                <form id="SortForm" method="post" asp-controller="Line" asp-action="GetLines" asp-route-subCatalogId="@Model.subCatalogId">
                                    <!--<select asp-items="Model.Countries" onchange="callChangefunc(this.value, @Model.subCatalogId)"></select>-->
                                    <select id="sort" asp-items="Model.Countries" onchange="this.form.submit(this.value)"></select>
                                </form>
                            </div>
                        *@
                        <div>
                            @Html.DropDownListFor(x => @Model.selectedValue, @Model.sortName, new { @onchange = "this.form.submit()" })
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-9">
            @{
                foreach (Line line in ViewBag.products)
                {
                    <partial name="~/Views/Shared/_ProductCard.cshtml" model="line" />
                }
            }
        </div>
        <div class="col-3">
            @await Html.PartialAsync("_LinesFilters")
        </div>
    </div>
</form>



@*
    <script>
        $.post(), function callChangefunc(val, subCatalogId) {
            //$('#SortForm').submit(val);
            //window.location.href = "/Line/GetLines?sort=" + val + "&subCatalogId=" + subCatalogId;
            $.post(window.location.href = "/Line/GetLines?", { sort: val, subCatalogId: subCatalogId })
        }
    </script>
*@